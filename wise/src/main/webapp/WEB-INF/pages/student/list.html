<!DOCTYPE html>
<html>

#include("/WEB-INF/pages/common/head.html")

<body>
	<div class="weadmin-nav">
		<span class="layui-breadcrumb"> <a href="">首页</a> <a href="">学生管理</a>
			<a> <cite>学生列表</cite></a>
		</span> <a class="layui-btn layui-btn-sm"
			style="line-height: 1.6em; margin-top: 3px; float: right"
			href="javascript:location.replace(location.href);" title="刷新"> <i
			class="layui-icon" style="line-height: 30px">ဂ</i></a>
	</div>
	<div class="weadmin-body">
		<div class="layui-row">
			<form class="layui-form layui-col-md12 we-search">
				<div class="layui-inline">
					<input class="layui-input" placeholder="开始日" name="start"
						id="start">
				</div>
				<div class="layui-inline">
					<input class="layui-input" placeholder="截止日" name="end" id="end">
				</div>
				<div class="layui-inline">
					<input type="text" name="username" placeholder="请输入用户名"
						autocomplete="off" class="layui-input">
				</div>
				<button class="layui-btn" lay-submit="" lay-filter="sreach">
					<i class="layui-icon">&#xe615;</i>
				</button>
			</form>
		</div>
		<div class="weadmin-block">
			<button class="layui-btn layui-btn-danger" onclick="delAll()">
				<i class="layui-icon"></i>批量删除
			</button>
			<button class="layui-btn" onclick="toAdd();">
				<i class="layui-icon"></i>添加
			</button>
			<span class="fr" style="line-height: 40px">共有数据：88 条</span>
		</div>
		<table class="layui-table" id="studentlist"></table>

	</div>
	<script src="#(ctx)/lib/layui/layui.js" charset="utf-8"></script>
	<script type="text/html" id="jtBar">
  <a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail">查看</a>
  <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
  <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
</script>
	<script type="text/javascript">
		layui.use([ 'table', 'layer' ], function() {
			var table = layui.table;
			var layer = layui.layer;

			table.render({
				elem : '#studentlist',
				url : '#(ctx)/student/listData',
				page : true,
				limits : [ 13, 16, 19, 22 ],
				limit : 13,
				response : { //定义后端 json 格式，详细参见官方文档
					statusName : 'code', //状态字段名称
					statusCode : '1', //状态字段成功值
					msgName : 'msg', //消息字段
					countName : 'count', //总数字段
					dataName : 'data' //数据字段
				},
				cols : [ [ {
					field : 'id',
					width : 80,
					checkbox : true,
					fixed : true
				}, {
					field : 'name',
					width : 80,
					title : '姓名'
				}, {
					field : 'sex',
					width : 80,
					title : '性别',
					sort : true
				}, {
					field : 'age',
					width : 80,
					title : '年龄'
				}, {
					field : 'parent_name',
					title : '父母联系方式',
					width : '30%',
					minWidth : 100
				}, {
					field : 'parent_info',
					title : '信息',
					sort : true
				}, {
					field : 'start_time',
					title : '开始时间',
					minWidth : 100
				}, {
					title : '操作',
					align : 'center',
					toolbar : '#jtBar'
				} ] ]
			});
			
			table.on('tool(studentlist)', function(obj){
			    var data = obj.data;
			    if(obj.event === 'detail'){
			    	jtUtil.detailRow('xxx详情','#(ctx)/sutra/teacher/toDetail/'+data.id);
			    } else if(obj.event === 'del'){
			    	jtUtil.delRow('真的删除吗','/sutra/teacher/delete/'+data.id,obj,layui.jquery);
			    } else if(obj.event === 'edit'){
			      layer.alert('编辑行：<br>'+ JSON.stringify(data))
			    }
			  });
		});
		function toAdd() {
			layer.open({
				type : 2,
				area : [ '800px', '500px' ],
				content : '#(ctx)/student/toAdd'
			});
		}
	</script>
</body>

</html>