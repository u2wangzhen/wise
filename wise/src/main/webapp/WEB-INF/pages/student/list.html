<!DOCTYPE html>
<html>

#include("/WEB-INF/pages/common/head.html")

<body>
	<div class="weadmin-nav">
		<span class="layui-breadcrumb"> <a href="">首页</a> <a href="">学生管理</a>
			<a> <cite>学生列表</cite></a>
		</span> <a class="layui-btn layui-btn-sm"
			style="line-height: 1.6em; margin-top: 3px; float: right"
			href="javascript:location.replace(location.href);" title="刷新"> <i
			class="layui-icon" style="line-height: 30px">ဂ</i></a>
	</div>
	<div class="weadmin-body">
		<div class="layui-row">
			<form class="layui-form layui-col-md12 we-search">
				<div class="layui-inline">
					<input class="layui-input" placeholder="开始日" name="start"
						id="start">
				</div>
				<div class="layui-inline">
					<input class="layui-input" placeholder="截止日" name="end" id="end">
				</div>
				<div class="layui-inline">
					<input type="text" name="username" placeholder="请输入用户名"
						autocomplete="off" class="layui-input">
				</div>
				<button class="layui-btn" lay-submit="" lay-filter="sreach">
					<i class="layui-icon">&#xe615;</i>
				</button>
			</form>
		</div>
		<div class="weadmin-block">
			<button class="layui-btn layui-btn-danger" onclick="delAll()">
				<i class="layui-icon"></i>批量删除
			</button>
			<button class="layui-btn" onclick="toAdd();">
				<i class="layui-icon"></i>添加
			</button>
			
		</div>
		<table class="layui-table" id="studentlist" lay-filter="studentlist"></table>

	</div>
	<script src="#(ctx)/lib/layui/layui.js" charset="utf-8"></script>
	<script src="#(ctx)/static/js/jtUtil.js" charset="utf-8"></script>
	
	<script type="text/html" id="jtBar">
  <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
</script>
	<script type="text/javascript">
		layui.use([ 'table', 'layer' ], function() {
			var table = layui.table;
			var layer = layui.layer;

			table.render({
				elem : '#studentlist',
				url : '#(ctx)/student/listData',
				page : true,
				limits : [ 13, 16, 19, 22 ],
				limit : 13,
				response : { //定义后端 json 格式，详细参见官方文档
					statusName : 'code', //状态字段名称
					statusCode : '1', //状态字段成功值
					msgName : 'msg', //消息字段
					countName : 'count', //总数字段
					dataName : 'data' //数据字段
				},
				cols : [ [ {
					field : 'id',
					width : 80,
					checkbox : true,
					fixed : true
				}, {
					field : 'name',
					width : 80,
					title : '姓名'
				}, {
					field : 'sex',
					width : 80,
					title : '性别',
					sort : true,
					templet: function(d){
				        return  d.sex==0?'<span style="color: #c00;">女</span>':'男';
				      }
				}, {
					field : 'age',
					width : 80,
					title : '年龄'
				}, {
					field : 'parent_name',
					title : '父母称呼',
					minWidth : 100
				}, {
					field : 'parent_info',
					title : '信息',
					width : '50%',
					sort : true
				}, {
					field : 'start_time',
					title : '开始时间',
					minWidth : 100
					,templet:'<div>{{ jtUtil.dataFormat(d.start_time,"yyyy-MM-dd")}}</div>'
				}, {
					title : '操作',
					align : 'center',
					toolbar : '#jtBar'
				} ] ]
			});
			
			table.on('tool(studentlist)', function(obj){
				///console.log(obj)
			    var data = obj.data;
			    if(obj.event === 'edit'){
			    	toEdit(data.id);
			    } 
			  });
		});
		function toAdd() {
			layer.open({
				type : 2,
				area : [ '800px', '500px' ],
				content : '#(ctx)/student/toForm'
			});
		}
		function toEdit(id) {
			layer.open({
				type : 2,
				area : [ '800px', '500px' ],
				content : '#(ctx)/student/toForm?id='+id
			});
		}
		/* function Format(datetime,fmt) {
			  if (parseInt(datetime)==datetime) {
			    if (datetime.length==10) {
			      datetime=parseInt(datetime)*1000;
			    } else if(datetime.length==13) {
			      datetime=parseInt(datetime);
			    }
			  }
			  datetime=new Date(datetime);
			  var o = {
			  "M+" : datetime.getMonth()+1,                 //月份   
			  "d+" : datetime.getDate(),                    //日   
			  "h+" : datetime.getHours(),                   //小时   
			  "m+" : datetime.getMinutes(),                 //分   
			  "s+" : datetime.getSeconds(),                 //秒   
			  "q+" : Math.floor((datetime.getMonth()+3)/3), //季度   
			  "S"  : datetime.getMilliseconds()             //毫秒   
			  };   
			  if(/(y+)/.test(fmt))   
			  fmt=fmt.replace(RegExp.$1, (datetime.getFullYear()+"").substr(4 - RegExp.$1.length));   
			  for(var k in o)   
			  if(new RegExp("("+ k +")").test(fmt))   
			  fmt = fmt.replace(RegExp.$1, (RegExp.$1.length==1) ? (o[k]) : (("00"+ o[k]).substr((""+ o[k]).length)));   
			  return fmt;
			} */
	</script>

</body>

</html>